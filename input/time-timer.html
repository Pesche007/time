<script type="text/ng-template" id="categoryTree">
    <div class="treenode" ng-class="{'background-grey':item.type==='company'}" ng-if="checkAssignedOnly(item)">
        <div ng-if="item.type==='company'">{{item.title}}</div>
        <a href="javascript:void(0)" ng-click="treeNewentry(item)" ng-if="item.type!=='company'">{{item.title}}</a>
    </div>
    <ul ng-if="item.categories.length">
        <li ng-repeat="item in item.categories" ng-include="'categoryTree'"></li>   
    </ul>   
</script>
  
<div class="row">
	<div class="col-sm-12">
        <div class="panel panel-white no-border-radius">
            <div class="panel-heading">
                <h4>Timer</h4>
                <ul class="panel-header-actions border-light"> <!-- Timer Menu -->
                    <li>
                        <div class="dropdown">
                            <span class="fa fa-gears fa-2x dropdown-toggle"></span>                        
                            <ul class="dropdown-menu" role="menu">
                                <li>
                                    <a href="javascript:void(0)" ng-model="timeTimerOPT.timeMultiple" btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0">
                                        <span class="fa fa-forward"></span>
                                        <span ng-if="!timeTimerOPT.timeMultiple">Activate Multiple</span>
                                        <span ng-if="timeTimerOPT.timeMultiple">Deactivate Multiple</span>                         
                                    </a>     
                                </li>
                                <li>
                                    <a href="javascript:void(0)" ng-model="timeTimerOPT.showmine" btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0">
                                        <span class="fa fa-user"></span>
                                        <span ng-if="!timeTimerOPT.showmine">Show only My Projects</span>
                                        <span ng-if="timeTimerOPT.showmine">Show all Projects</span>                             
                                    </a>                                 
                                </li>             
                            </ul>
                        </div>
                    </li>  
                </ul>
            </div>
            <div class="panel-body"> 
                <div class="form-inline">
                    <input type="text" ng-model="timeCompany.title" placeholder="Company Name" typeahead-on-select="timeUpdate($item)" typeahead="company as item.title for item in treeOPT.items | filter:$viewValue" class="form-control">                
                    <div class="btn-group" dropdown>
                      <button type="button" class="btn btn-default dropdown-toggle">
                        <span class="fa fa-building-o"></span> <span class="caret"></span>
                      </button>
                      <ul class="dropdown-menu" role="menu">
                        <li ng-repeat="item in treeOPT.items"><a ng-click="timeUpdate(item)" href="javascript:void(0)">{{item.title}}</a></li>
                      </ul>
                    </div>   
                </div>
                <div class="tree margin-top-M" ng-if="selectedCompany">
                    <button type="button" class="tree-close" ng-click="resetTreeView()">&times;</button>
                    <ul>
                        <li ng-repeat="item in selectedCompany" ng-include="'categoryTree'"></li>
                    </ul>
                </div>
                <div class="clearfix"></div>
                <div class="table-responsive margin-top-M" ng-if="treeNew.length">                        
                    <table class="table table-bordered table-hover table-nonfluid table-vertical-middle">            
                        <thead>
                            <tr><th>Company</th><th>Project</th><th>Actions</th><th>Time</th><th>Comments</th></tr>
                        </thead>
                        <tbody>
                             <tr ng-repeat="obj in treeNew track by $index">
                                <td>{{obj.cmptitle}}</td>
                                <td><span class="label label-primary">{{obj.prjtitle}}</span></td>
                                <td>
                                <button ng-disabled="checktimer(obj, 'start')" type="button" ng-click="timeTimerstart(obj)" class="btn btn-default">Start <span class="fa fa-caret-right"></span></button>
                                <button ng-disabled="checktimer(obj, 'pause')" type="button" ng-click="timeTimerpause(obj)" class="btn btn-default">Pause <span class="fa fa-pause"></span></button>
                                <button ng-disabled="checktimer(obj, 'stop')" type="button" ng-click="timeTimerstop(obj)" class="btn btn-default">Stop <span class="fa fa-stop"></span></button>
                                <button ng-if="obj.state==3" type="button" modal-confirm title="Confirm" text="Delete Entry?" function="itemRemove($index)" class="btn btn-default"><span class="fa fa-trash-o"></span></button>
                                </td>
                                <td>
                                <span ng-if="obj.state!=3">{{calctime(obj)}}</span>
                                <input ng-if="obj.state==3" type="text" class="form-control" ng-model="obj.time" />
                                </td>
                                <td>
                                <input type="text" class="form-control" ng-model="obj.comment" />
                                </td>                    
                            </tr>
                        </tbody>
                    </table>            
                </div>
            </div>
        </div>                            
    </div>
</div>                    