<script type="text/ng-template" id="categoryTree">
	<a href="javascript:void(0)" ng-click="treeNewentry(item)" ng-if="checkAssignedOnly(item)"><span class="label label-default">{{item.title}}</span></a>
	<ul class="tree" ng-if="item.categories">
		<li ng-repeat="item in item.categories" ng-include="'categoryTree'"></li>	
	</ul>	
</script>
  
<div class="row">
	<div class="col-sm-12">
        <div class="panel panel-default height600">
            <div class="panel-heading">
            	<h3 class="panel-title">Timer
                <button type="button" class="btn btn-success btn-xs pull-right button-move-TR" ng-click=""><span class="fa fa-save"></span> Save</button>
                <div class="divider-vertical pull-right"></div>
                <a href="javascript:void(0)" class="nodecoration pull-right" ng-model="timeTimerOPT.timeMultiple" btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0">
                    <span class="fa fa-forward"></span>
                    <span ng-if="!timeTimerOPT.timeMultiple" class="fa fa-toggle-off"></span>
                    <span ng-if="timeTimerOPT.timeMultiple" class="fa fa-toggle-on"></span>                         
                </a> 
                <a href="javascript:void(0)" class="nodecoration pull-right margin-right-L" ng-model="timeTimerOPT.showmine" btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0">
                    <span class="fa fa-user"></span>
                    <span ng-if="!timeTimerOPT.showmine" class="fa fa-toggle-off"></span>
                    <span ng-if="timeTimerOPT.showmine" class="fa fa-toggle-on"></span>                             
                </a>                                       
                </h3>
            </div>
            <div class="panel-body"> 
                <div class="form-inline">
                    <input type="text" ng-model="timeCompany.title" typeahead-on-select="timeUpdate($item)" typeahead="company as item.title for item in treeOPT.items | filter:$viewValue" class="form-control">
                    <button type="button" ng-click="timeCompany=null;treeTable=[]" class="btn btn-default"><span class="fa fa-times"></span></button>
                
                    <div class="btn-group" dropdown>
                      <button type="button" class="btn btn-default dropdown-toggle">
                        <span class="fa fa-building-o"></span> <span class="caret"></span>
                      </button>
                      <ul class="dropdown-menu" role="menu">
                        <li ng-repeat="item in treeOPT.items"><a ng-click="timeUpdate(item)" href="javascript:void(0)">{{item.title}}</a></li>
                      </ul>
                    </div>   
                </div>
                <div class="treewrapper margin-top-M" ng-if="treeTable.length">
                    <ul class="tree">
                        <li ng-repeat="item in treeTable" ng-include="'categoryTree'"></li>
                    </ul>
                </div>
                <table ng-if="treeNew.length" class="table table-condensed table-striped">
                <thead>
                    <tr><th>Company</th><th>Project</th><th>Actions</th><th>Time</th><th>Comments</th></tr>
                </thead>
                <tbody>
                     <tr ng-repeat="obj in treeNew track by $index">
                        <td><span class="label label-primary">{{obj.cmptitle}}</span></td>
                        <td><span class="label label-default">{{obj.prjtitle}}</span></td>
                        <td>
                        <button ng-disabled="checktimer(obj, 'start')" type="button" ng-click="timeTimerstart(obj)" class="btn btn-default">Start <span class="fa fa-caret-right"></span></button>
                        <button ng-disabled="checktimer(obj, 'pause')" type="button" ng-click="timeTimerpause(obj)" class="btn btn-default">Pause <span class="fa fa-pause"></span></button>
                        <button ng-disabled="checktimer(obj, 'stop')" type="button" ng-click="timeTimerstop(obj)" class="btn btn-default">Stop <span class="fa fa-stop"></span></button>
                        <button ng-if="obj.state==3" type="button" modal-confirm title="Confirm" text="Delete Entry?" function="itemRemove($index)" class="btn btn-default"><span class="fa fa-trash-o"></span></button>
                        </td>
                        <td>
                        <span ng-if="obj.state!=3">{{calctime(obj)}}</span>
                        <input ng-if="obj.state==3" type="text" class="form-control" ng-model="obj.time" />
                        </td>
                        <td>
                        <input ng-if="obj.state==3" type="text" class="form-control" ng-model="obj.comment" />
                        </td>                    
                    </tr>
                </tbody>
                </table>            
            </div>
        </div>                            
    </div>
</div>                    