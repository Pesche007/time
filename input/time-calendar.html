<script type="text/ng-template" id="calendarProjects">
    <div ng-if="field.type=='company'" ng-click="field.childrenVisible=!field.childrenVisible" class="pointer">                                     
        <span ng-show="!field.childrenVisible" class="fa fa-caret-right"></span>
        <span ng-show="field.childrenVisible" class="fa fa-caret-down"></span>
        {{field.title}}
    </div>
    <div ng-if="field.type=='project' && checkAssignedOnly(field)" ng-show="parentOBJ.childrenVisible" class='btn btn-primary btn-xs' data-drag='true' 
    data-jqyoui-options='{revert: false, helper: "clone"}' jqyoui-draggable data-options='{"title":"{{field.title}}", "id":"{{field.id}}", "color":"#336699"}'>{{field.title}}</div>
    <ul class="calendar-projects" ng-if="field.categories">
        <li ng-repeat="field in field.categories" ng-include="'calendarProjects'">
        </li>
    </ul>               
</script> 
<div class="row">
	<div class="col-sm-2">       
        <div class="panel panel-white no-border-radius">
            <div class="panel-heading">
            	<h4>Resources</h4>
                <ul class="panel-header-actions border-light"> <!-- Resources Menu -->
                    <li>
                        <div class="dropdown">
                            <span class="fa fa-gears fa-2x dropdown-toggle"></span>                        
                            <ul class="dropdown-menu" role="menu">
                                <li>
                                    <a href="javascript:void(0)" ng-model="eventOPT.showmine" btn-checkbox btn-checkbox-true="true" btn-checkbox-false="false">
                                        <span class="fa fa-user"></span>
                                        <span ng-if="!eventOPT.showmine">Show only My Projects</span>
                                        <span ng-if="eventOPT.showmine">Show all Projects</span>                              
                                    </a>     
                                </li>            
                            </ul>
                        </div>
                    </li>  
                </ul> 
            </div>
            <div class="panel-body">
                <input type="text" placeholder="Filter" ng-model="searchClientProjects" class="form-control"> 
                <ul class="calendar-projects">
                    <li ng-repeat="field in clientprojects | filter:searchClientProjects" ng-include="'calendarProjects'" ng-init="parentOBJ=field"></li>            
                </ul>
                <ul class="calendar-projects">
                    <li ng-repeat="field in internal | filter:searchClientProjects">
                        <div ng-click="field.childrenVisible=!field.childrenVisible" class="pointer"> 					
                            <span ng-show="!field.childrenVisible" class="fa fa-caret-right"></span>
                            <span ng-show="field.childrenVisible" class="fa fa-caret-down"></span>
                            {{field.title}}
                        </div>
                      	<div ng-repeat='item in field.categories' class='btn btn-info btn-xs margin-right-S' ng-show="field.childrenVisible" data-drag='true' 
                        data-jqyoui-options='{revert: false, helper: "clone"}' jqyoui-draggable data-options='{"title":"{{item.title}}", "id":"{{item.id}}", "color":"#5BC0DE"}'>{{item.title}}</div>
                    </li>            
                </ul>                    
            </div>
        </div>
    </div>
    <div class="col-sm-8"> 
        <div class="panel panel-white no-border-radius maxheight600">
            <div class="panel-heading">
            	<h4>Calendar</h4>
                <ul class="panel-header-actions border-light"> <!-- Resources Menu -->
                    <li>
                        <div class="dropdown">
                            <span class="fa fa-gears fa-2x dropdown-toggle"></span>                        
                            <ul class="dropdown-menu" role="menu">
                                <li>
                                    <a href="javascript:void(0)" ng-click="calendarSimplecontrol('today')"><span class="fa fa-dot-circle-o"></span> Today</a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" ng-click="calendarAdvancedcontrol('changeView', 'agendaDay')"><span class="fa fa-calendar-o"></span> Day</a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" ng-click="calendarAdvancedcontrol('changeView', 'agendaWeek')"><span class="fa fa-columns"></span> Week</a>
                                </li>   
                                <li>
                                    <a href="javascript:void(0)" ng-click="calendarAdvancedcontrol('changeView', 'month')"><span class="fa fa-calendar"></span> Month</a>
                                </li>                                       
                            </ul>
                        </div>
                    </li>
                    <li>
                        <button class="btn-none" ng-click="calendarSimplecontrol('next')"><span class="fa fa-angle-right fa-2x"></span></button>                        
                    </li>  
                    <li>
                        <button class="btn-none" ng-click="calendarSimplecontrol('prev')"><span class="fa fa-angle-left fa-2x"></span></button>                        
                    </li>  
                </ul> 
            </div>
            <div class="panel-body">
               	<div ui-calendar="uiConfig.calendar" ng-model="eventSource" class="calendar-wrapper" calendar="myCalendar"></div>             		
            </div>
        </div>  
    </div>
    <div class="col-sm-2">  
        <div class="panel panel-white no-border-radius maxheight600">
            <div class="panel-heading">
            	<h4>Selected</h4>
                <ul class="panel-header-actions border-light"  ng-if="eventfocus.visible"> <!-- RATES Menu -->
                    <li>
                        <div class="dropdown">
                            <span class="fa fa-gears fa-2x dropdown-toggle"></span>                        
                            <ul class="dropdown-menu" role="menu">
                                <li>
                                <a href="javascript:void(0)" modal-confirm title="Confirm" text="Delete Selected Entry?" function="eventdetailsdelete()">
                                    <span class="fa fa-trash-o"></span> Delete Entry
                                </a>
                                </li>             
                            </ul>
                        </div>
                    </li>                     
                </ul>                
            </div>
            <div class="panel-body">
                <div ng-if="eventfocus.visible">                                   
                    <strong>{{eventfocus.title}}</strong>                 
                    <form name="CalendarViewTimeFrom" class="form-inline" role="form">
                        <div class="form-group">
                            {{eventfocus.start | date:'EEE dd.MM.yyyy'}}
                        </div>
                        <div class="form-group">
                            <input type="text" name="CalendarViewTimeFromInput" ng-model="eventfocus.startTMP" class="form-control input-sm" ng-pattern="/^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/"/>
                            <div class="form-group alert alert-danger" role="alert" ng-show="CalendarViewTimeFrom.CalendarViewTimeFromInput.$error.pattern">
                                24h-format (18:00)
                            </div>                            
                        </div>
                    </form>     
                   <form name="CalendarViewTimeTo" class="form-inline" role="form">
                        <div class="form-group">
                            {{eventfocus.end | date:'EEE dd.MM.yyyy'}}
                        </div>
                        <div class="form-group">
                            <input type="text" name="CalendarViewTimeToInput" ng-model="eventfocus.endTMP" class="form-control input-sm" ng-pattern="/^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/"/>
                            <div class="form-group alert alert-danger" role="alert" ng-show="CalendarViewTimeTo.CalendarViewTimeToInput.$error.pattern">
                               24h-format (18:00)
                            </div>                             
                        </div>
                    </form>
                    <strong>Comment</strong>:<br />
                    <textarea class="form-control" rows="3" ng-model="eventfocus.comment"></textarea><br />
                    <div class="alert alert-danger" ng-if="eventfocus.error">{{eventfocus.error}}</div>
                </div>                
            </div>
        </div>            
    </div>        
</div>                            