<script type="text/ng-template" id="categoryTree">
	<a href="javascript:void(0)" ng-click="treeNewentry(item)"><span class="label label-default">{{item.title}}</span></a>
	<ul class="tree" ng-if="item.categories">
		<li ng-repeat="item in item.categories" ng-include="'categoryTree'"></li>	
	</ul>	
</script>
<div class="row">
	<div class="col-sm-12">
		<div class="panel panel-default height600">
            <div class="panel-heading">
            	<h3 class="panel-title">Time Entries<button type="button" class="btn btn-success btn-xs pull-right button-move-TR"><span class="fa fa-save"></span> Save</button></h3>
            </div>
            <div class="panel-body">                    
            <div class="form-inline">
                <input type="text" ng-model="time_company.title" typeahead-on-select="timeUpdate($item)" typeahead="company as item.title for item in treeOPT.items | filter:$viewValue" class="form-control">
                <button type="button" ng-click="timeCompany=null;treeTable=[]" class="btn btn-default"><span class="fa fa-times"></span></button>               
                <div class="btn-group" dropdown>
                  <button type="button" class="btn btn-default dropdown-toggle">
                    <span class="fa fa-building-o"></span> <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu">
                    <li ng-repeat="item in treeOPT.items"><a ng-click="timeUpdate(item)" href="javascript:void(0)">{{item.title}}</a></li>
                  </ul>
                </div>                                 
            </div>
            <div class="treewrapper margin-top-M" ng-if="treeTable.length">
                <ul class="tree">
                    <li ng-repeat="item in treeTable" ng-include="'categoryTree'"></li>
                </ul>
            </div>
            <table ng-if="treeNew.length" class="table table-condensed table-striped">
            <thead>
                <tr><th>Company</th><th>Project</th><th>Date</th><th>Hours</th><th>Comments</th><th>Actions</th></tr>
            </thead>
            <tbody>
                 <tr ng-repeat="obj in treeNew track by $index">
                    <td><span class="label label-primary">{{obj.cmptitle}}</span></td>
                    <td>
                    <span class="label label-default">{{obj.prjtitle}}</span></td>
                    <td><input type="text" class="form-control" datepicker-popup="dd.MM.yyyy" ng-model="obj.date" ng-change="formatedate(obj)" ng-click="open($event, $index)" is-open="opened[$index]"></td>
                    <td>
                    <form name="myform" class="form-inline"> 
                        <input type="text" class="form-control input-sm" name="price_field" ng-model="obj.time" ng-pattern="/(^\d{1,2}(?:\.\d{1})?$)|(^\d{4}(\-)\d{4})/" placeholder="Time">
                        <div class="alert alert-info" role="alert" ng-show="myform.price_field.$error.pattern">
                            Valid times:<br />
                            1. Hours <strong>1.5</strong><br />2. From-To <strong>1000-1200</strong></span>
                        </div>
                    </form>
                    </td>
                    <td>
                    <input type="text" class="form-control input-sm" ng-model="obj.comment" placeholder="Comment"/>
                    </td>
                    <td>
                        <button type="button" ng-click="treeInputTableRemove($index)" class="btn btn-default"><span class="fa fa-times"></span></button>
                        <button type="button" ng-click="treeInputTableCopy(obj, $index)" class="btn btn-default"><span class="fa fa-files-o"></span></button>                    
                    </td>
                </tr>
            </tbody>
            </table> 
            </div>           
		</div>
    </div>
</div>              