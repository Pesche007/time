<script type="text/ng-template" id="categoryTree">
	<a href="javascript:void(0)" ng-click="tree_newentry(item)" ng-if="checkAssignedOnly(item)"><span class="label label-default">{{item.title}}</span></a>
	<ul class="tree" ng-if="item.categories">
		<li ng-repeat="item in item.categories" ng-include="'categoryTree'"></li>	
	</ul>	
</script>
<div class="container-fluid">    
	<div class="row">
	    <div class="col-sm-3"><pre class="code">{{ treeOPT.items | json }}</pre></div>
		<div class="col-sm-6">
	        <div class="form-inline">
            	<input type="text" ng-model="time_company.title" typeahead-on-select="time_update($item)" typeahead="company as item.title for item in treeOPT.items | filter:$viewValue" class="form-control">
                <button type="button" ng-click="time_company=null;tree_table=[]" class="btn btn-default"><span class="fa fa-times"></span></button>
			
                <div class="btn-group" dropdown>
                  <button type="button" class="btn btn-default dropdown-toggle">
                    <span class="fa fa-building-o"></span> <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu">
                    <li ng-repeat="item in treeOPT.items"><a ng-click="time_update(item)" href="javascript:void(0)">{{item.title}}</a></li>
                  </ul>
                </div>   
                
                        
                
                <button type="button" class="btn btn-default margin-left-L" ng-model="time_timerOPT.time_multiple" btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0">
                	<span class="fa fa-forward"></span>
                    <span ng-if="time_timerOPT.time_multiple==0">Mulitple Off</span>
                    <span ng-if="time_timerOPT.time_multiple==1">Mulitple On</span>
                </button>
                <button type="button" class="btn btn-default" ng-model="time_timerOPT.showmine" btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0">
                	<span class="fa fa-user"></span>
                    <span ng-if="time_timerOPT.showmine==0">Assigned Off</span>
                    <span ng-if="time_timerOPT.showmine==1">Assigned On</span>
                </button>
				<div class="pull-right">
                	<span class="fa fa-save"></span>
                    <span ng-if="time_timerOPT.time_autosave==0">Autosave Off</span>
                    <span ng-if="time_timerOPT.time_autosave==1">Autosave On</span> 
                </div>            
            </div>
            <div class="treewrapper margin-top-M" ng-if="tree_table.length">
                <ul class="tree">
                    <li ng-repeat="item in tree_table" ng-include="'categoryTree'"></li>
                </ul>
            </div>
            <table ng-if="tree_new.length" class="table table-condensed table-striped">
			<thead>
            	<tr><th>Company</th><th>Project</th><th>Actions</th><th>Time</th><th>Comments</th></tr>
            </thead>
            <tbody>
            	 <tr ng-repeat="obj in tree_new track by $index">
                	<td><span class="label label-primary">{{obj.cmptitle}}</span></td>
                    <td><span class="label label-default">{{obj.prjtitle}}</span></td>
                    <td>
                    <button ng-disabled="checktimer(obj, 'start')" type="button" ng-click="time_timerstart(obj)" class="btn btn-default">Start <span class="fa fa-caret-right"></span></button>
                    <button ng-disabled="checktimer(obj, 'pause')" type="button" ng-click="time_timerpause(obj)" class="btn btn-default">Pause <span class="fa fa-pause"></span></button>
                    <button ng-disabled="checktimer(obj, 'stop')" type="button" ng-click="time_timerstop(obj)" class="btn btn-default">Stop <span class="fa fa-stop"></span></button>
                    <button ng-if="obj.state==3" type="button" ng-click="item_remove($index)" class="btn btn-default"><span class="fa fa-trash-o"></span></button>
                    </td>
                    <td>
                    <span ng-if="obj.state!=3">{{calctime(obj)}}</span>
                    <input ng-if="obj.state==3" type="text" class="form-control" ng-model="obj.time" />
                    </td>
                    <td>
                    <input ng-if="obj.state==3" type="text" class="form-control" ng-model="obj.comment" />
                    </td>                    
                </tr>
            </tbody>
			</table>            
        </div>
        <div class="col-sm-3"><pre class="code">{{ tree_new | json }}</pre><pre class="code">{{ tree_table | json }}</pre></div> 
	</div>              
</div>        